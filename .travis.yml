language: minimal

os:
  - macos
  - linux

addons:
  apt:
    update: true
  homebrew:
    update: true
    brewfile: true

before_install:
  - uname -a
  - if [ "$(uname -s)" = 'Darwin' ]; then sw_vers; fi

install:
  - |
    if command -v apt-get >/dev/null 2>&1; then
      sudo sh 'utils/install-debian.sh'
    fi
  - eval "$(gimme stable)" # otherwise travis has go-v1.11
  - sh 'utils/install-components.sh'

script:
  - sh 'utils/lint.sh'
